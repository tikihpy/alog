# 背景



软件测试分层：



![](http://ww2.sinaimg.cn/large/006tNc79ly1g62j8l4wg4j30h206u0ul.jpg "img")

1）表现层（UI）：用户界面，即用户可见的操作界面或者入口。

2）业务逻辑层（BLL）：封装具有业务含义的操作函数。

3）数据处理层（DAL）：封装对数据库或者其他存储介质的原子性操作。



* **单元测试**关注代码的实现逻辑，例如一个if 分支或一个for循环的实现，一般都有研发负责测试。

* **集成、接口测试**关注的一是个函数、类（方法）所提供的接口是否可靠。

* **UI测试**就是最简单的在页面上面的点点点测试，也是最简单的黑盒手工测试！UI自动化必须自己写脚本，一开始我们可以通过录制脚本熟悉被测产品UI自动化脚本是怎样写的。

* **金字塔形**，是为了表示不同阶段所投入自动化测试的比例：

  * 越下层投入应当越多

  * 越下层效率越高

  * 越下层成本越低

  * 越下层实现专业性要求越高

在《google 测试之道》一书，对于google产品，70%的投入为单元测试，20%为集成、接口测试，10% 为UI层的自动化测试。

因为越往上层，其维护成本越高。尤其是UI层的元素会时常的发生改变。所以，**我们应该把更多的自动化测试放在单元测试与接口测试阶段进行。**

如果一个产品从没有做单元测试与接口测试，只做UI层的自动化测试是不科学的，从而很难从本质上保证产品的质量。但如果妄图实现全面的UI层的自动化测试，那更是一个劳民伤财的举动，投入了大量人力时间，最终获得的收益可能会远远低于所支付的成本。

　　既然UI层的自动化测试这么劳民伤财，那我们只做单元测试与接口测试是否可行？**不管什么样的产品，最终呈现给用户的是UI层。**所以，测试人员应该把更多的精力放在UI层。那么也正是因为测试人员在UI层投入大量的精力，所以，有必要通过自动化的方式帮助我们“部分解放”重复的劳动。





# 目的



1、数据处理层、业务逻辑层，通过自动化的方式实现“全面解放”重复的工作；

2、UI界面层，通过自动化的方式实现“部分解放”重复的工作；

通过引入自动化测试工具和方案，提高测试执行效率降低人工回归的成本，缩短项目测试周期。



# 要求

自动化测试开展的软件项目要求：

* 软件需求变动不频繁

　　测试脚本的稳定性决定了自动化测试的维护成本。如果软件需求变动过于频繁，测试人员需要根据变动的需求来更新测试用例以及相关的测试脚本，而脚本的维护本身就是一个代码开发的过程，需要修改、调试，必要的时候还要修改自动化测试的框架，如果所花费的成本不低于利用其节省的测试成本，那么自动化测试便是失败的。

　　项目中的某些模块相对稳定，而某些模块需求变动性很大。我们便可对相对稳定的模块进行自动化测试，而变动较大的仍是用手工测试。

* 项目周期较长

由于自动化测试需求的确定、自动化测试框架的设计、测试脚本的编写与调试均需要相当长的时间来完成。这样的过程本身就是一个测试软件的开发过程，需要较长的时间来完成。如果项目的周期比较短，没有足够的时间去支持这样一个过程，那么自动化测试便成为笑谈。

* 自动化测试脚本可重复使用

　　自动化测试脚本的重复使用要从三个方面来考量，一方面所测试的项目之间是否很大的差异性（如C/S系统和B/S系统的差异）；所选择的测试工具是否适应这种差异；最后，测试人员是否有能力开发出适应这种差异的自动化测试框架。



# 现状

#### 目睹直播

开放API+平台所有API \[ PHP老代码API（这部分接口无接口文档）\]

开放API：[http://mudu.tv/api/v1/](http://mudu.tv/api/v1/)

老代码API包括：？



平台功能多，需要提取核心功能流程来做UI自动化



控制台后续会重构，部分互动功能也需要重构



其他？



#### 目睹布谷

API档：

[http://bugu.mudu.tv/dev/%E9%9B%86%E6%88%90%E6%8E%A5%E5%85%A5/%E7%9B%B4%E6%92%AD%E5%A4%96%E5%B5%8C.html](http://bugu.mudu.tv/dev/%E9%9B%86%E6%88%90%E6%8E%A5%E5%85%A5/%E7%9B%B4%E6%92%AD%E5%A4%96%E5%B5%8C.html)



接口文档不全，需补充

是否有重构需求

其他？





#### 目睹制播

API文档地址：

[http://119.3.93.35:8888/\#/](http://119.3.93.35:8888/#/)

账号：weilin 密码：asdfashkjhlkj

目睹直播对接部分接口需补充



其他？





#### 目睹有课

有课API文档，postman帐号：

[hanyingwei@mudu.tv](mailto:hanyingwei@mudu.tv)密码 mudu.pub123!@\#



接口文档不全，需补充



其他？



# 方案设想及规划

## 第一阶段：工具实现-业务逻辑层部分自动化

### 1、对象：

直播、布谷、**制播**、有课 ------先测制播，接口全测

### 2、目标：

完成所有全平台接口文档整理，实现核心功能接口自动化；

### 3、方式：

借助自动化接口测试工具Postman、jmeter进行接口调试及压力测试，通过自动化接口管理平台YAPI，将全平台接口进行整合管理，以实现核心接口自动化测试。

### 4、工具

YAPI平台介绍：

[http://mudu.ns.4l.hk:3000/project/10/interface/api](http://mudu.ns.4l.hk:3000/project/10/interface/api)

[crper@outlook.com](mailto:crper@outlook.com)123456

### 5、方法

1、完善接口文档，整理各产品线现有的API文档，并补全缺少部分的文档

2、提取核心功能模块API清单

3、完善核心接口测试用例，根据核心功能模块API清单，按模块设计测试用例，评审

4、核心接口测试用例脚本化，通过YAPI平台整合，实现功能自动化测试

5、使用jmeter实现接口性能测试

6、接口验收



### 6、测试人员分配

接口自动化测试人员：2-3人



### 7、周期预估

1.接口文档完成节点（按模块）

2.接口用例完成节点（按模块）

3.接口测试执行（按模块）









## 第二阶段：工具实现-业务逻辑层全面自动化+UI层部分自动化

### 1、对象：

直播、布谷、制播、有课

### 2、目标：

完成所有全平台接口文档整理，实现全功能接口自动化，核心主流程功能UI自动化；

### 3、方式：

业务逻辑层：借助自动化接口测试工具Postman、jmeter进行接口调试及压力测试，通过自动化接口管理平台YAPI，将全平台接口进行整合管理，以实现核心接口自动化测试；

UI层：借助工具Cypress进行部分核心功能模块端到端自动化测试；

### 4、工具

Cypress工具介绍：

[https://github.com/tikihpy/alog/blob/master/e2ecypress.md](https://github.com/tikihpy/alog/blob/master/e2ecypress.md)

### 5、方法

1.1、接口部分：根据阶段1的逻辑持续完善；

1.2、UI部分：

1.2.1、功能测试用例的完善，提取核心功能

1.2.2、熟悉测试工具Cypress

2、UI部分：根据功能测试用例，通过测试工具进行核心功能模块流程全用例覆盖

3、接口验收



### 6、测试人员分配

接口自动化测试人员：2-3人





### 7、周期预估





## 第三阶段：代码实现-业务逻辑层部分自动化

### 1、对象：

直播、布谷、制播、有课

### 2、目标：

完成所有全平台接口文档整理，实现核心功能接口自动化；

### 3、方式：

Python + unittest + requests 接口自动化测试框架

unittest:

[https://segmentfault.com/a/1190000016315201?utm\_source=tag-newest](https://segmentfault.com/a/1190000016315201?utm_source=tag-newest)

[https://docs.python.org/3/library/unittest.html](https://docs.python.org/3/library/unittest.html)

### 4、工具

编码IDE



### 5、方法

1、搭建测试环境，熟悉测试框架

2、根据核心功能模块测试用例，进行脚本编写，持续集成

3、脚本验收



### 6、测试人员分配

测试开发人员：3-4人



### 7、周期预估







## 第四阶段：代码实现-业务逻辑层全面自动化+UI层部分自动化

### 1、对象：

直播、布谷、制播、有课

### 2、目标：

完成所有全平台接口文档整理，实现全功能接口自动化，核心主流程功能UI自动化；

### 3、方式：

业务逻辑层：Python + unittest + requests 接口自动化测试框架

UI层：要考虑到兼容性

web端 Python + selenium + unittest

移动端自动化 Python + Appium

Selenium介绍：

[https://www.seleniumhq.org/docs/cn/01\_introducing\_selenium.jsp](https://www.seleniumhq.org/docs/cn/01_introducing_selenium.jsp)

Appium介绍：

[https://github.com/tikihpy/alog/blob/master/appium.md](https://github.com/tikihpy/alog/blob/master/appium.md)

相关教程介绍：

[https://www.cnblogs.com/fnng/p/4540731.html](https://www.cnblogs.com/fnng/p/4540731.html)

### 4、工具

编码IDE



### 5、方法

1.1、接口层面：根据阶段3的逻辑持续集成

1.2、UI层面：

1.2.1、web端搭建测试环境，熟悉测试框架

1.2.2、移动端搭建测试环境，熟悉测试框架

2、根据全功能模块测试用例，进行脚本编写，持续集成

3、脚本验收



### 6、测试人员分配

测试开发人员：3-4人



### 7、周期预估







































































==============================================================



* 您是如何理解或定义自动化测试的？

* 您想通过自动化测试解决什么问题？

* 您的组织对自动测试的期望是什么？

* 您的自动化测试目标是否能支持达成您的测试目标？

* 您的人工测试和自动化测试如何相互配合？

* 您想通过自动化测试达到怎样的测试覆盖？



为了成功实施自动化测试，您需要对您的自动化测试成功需要达成的条件进行合理的、可测量的定义。满足这些成功条件，您的自动化测试实施就可以认为是成功的。因为不同的组织或企业由于情况不同对自动化测试实施成功的定义也不一样。例如，有的研发团队把软件测试所需测试时间的减少作为自动化测试实施成功的一个条件。我们一个客户的研发团队回归测试在实施自动化测试之前需要 40 个小时（1 周工作）。该团队自动化测试实施成功定义为每次能够在 16 小时内完成回归测试。自动化测试成功的定义不仅仅可以明确的数字表明，也可以是对研发团队和组织的价值描述。例如，“可以释放更多的测试人员从事更多探索性测试等更具价值的测试工作”，或者“可以更快的进行冒烟测试，使得待测软件产品更快的稳定下来“等。



自动化测试实施计划应该包括自动化测试实施范围、可用人力/时间/预算等信息。我们建议最好包括以下信息：

使用哪些指标跟踪和测量自动化测试实施情况。例如代码测试覆盖率、发现缺陷数、测试执行时间、实施进度、实施成本等。自动化测试实施项目结果可交付的成果物是哪些？这些成果物可能包括自动化测试实施项目计划、自动化测试相关的工具选择标准、自动化测试相关工具的评估结果、自动测试概念的验证结果、和自动化测试用例等等。自动化测试实施项目对其它工作的交付日期有什么样的影响？您的测试案例将如何管理和维护？自动化测试团队在哪里办公？为了跟其他研发团队更好的协同工作，自动化测试团队最好跟其他研发团队成员在同一个办公室。您的人员培训计划是怎样的？哪些人员，什么时间，在哪里进行培训？制定自动化测试实施项目计划时，请留足必要的获取项目所需资源的前置时间，例如需要时间获取硬件、软件、人员等等。有时测试人员由于在其他项目中无法及时抽身，会对自动化测试实施项目的实施造成影响。自动化测试实施项目本身也是一个开发项目，可以考虑使用敏捷方法来管理，例如可以采用冲刺/增量/看板协同等方法。

如果您的组织中在使用 Scrum 方法，您也可以在自动化测试实施项目中使用 Scrum。您可以把自动化实施项目情况分析、制定自动化实施项目计划和组建自动化团队作为首个冲刺的用户故事。第二个 Scrum 冲刺可以包括准备测试案例、寻找被评估的自动化测试工具和搭建准备自动化测试概念验证的环境等。

跟研发项目一样，敏捷方法对于自动化测试项目同样有效。敏捷方法提倡团队协同，使用较小的交付粒度提高交付频率，对需求变化进行及时响应，从而可以帮组提高自动化测试实施项目的成功率。

最后需要说明的是，自动化测试一旦开始，就需要持续进行维护。您需要有实施案例维护、测试执行和测试结果评估的长期资源计划。





项目情况分析

制定项目计划

组件自动化测试团队





1. 进行软件项目当前情况分析；

2. 规划自动化测试；

3. 组建胜任自动化测试的团队；

4. 准备自动化测试案例；

5. 自动化测试工具选择和评估；

6. 自动化测试理念验证；

7. 完善自动化测试工具；

8. 自动化测试培训和实践；

9. 自动化测试脚本实现；

10. 自动化测试过程评审回顾和调整。







自动化测试项目通过标准如下。

自动化测试用例和数据集达到100%需求覆盖。

自动化测试用例100%被执行。

测试过程中缺陷率达到系统测试质量标准。

经测试经理和资深自动化测试工程师审核通过。



